/* =================================================================== */
/* 1. CONFIGURACIÓN GLOBAL Y VARIABLES DE DISEÑO                     */
/* =================================================================== */
:root {
  /* Paleta de colores */
  --color-principal: #ffc839;
  --color-oscuro: #212529;
  --color-blanco: #fff;
  --color-claro: #f5f5ff; /* Un poco más azulado para un look más moderno */
  --color-bordes-sutiles: #eef2f5;
  --color-verde-exito: #28a745;
  --color-rojo-peligro: #d9534f;
  --color-texto-principal: var(--color-oscuro);
  --color-texto-secundario: #868e96;

  /* Estilos reutilizables */
  --sombra-suave: 0 4px 12px rgba(0, 0, 0, 0.08);
  --border-radius-suave: 12px;
  --transicion-suave: all 0.3s ease;
}

/* Estilos base del cuerpo */
body {
  font-family: "Poppins", sans-serif;
  background-color: var(--color-claro);
  color: var(--color-texto-principal);
  margin: 0;
  padding-bottom: 80px; /* Espacio para la navbar en móvil */
}

/* =================================================================== */
/* 2. ESTRUCTURA PRINCIPAL (LAYOUT RESPONSIVE)                       */
/* =================================================================== */
.grid-container {
  display: grid;
  grid-template-columns: 1fr; /* Una columna en móvil */
  gap: 15px;
  padding: 15px;
}

/* Diseño para escritorio */
@media (min-width: 1024px) {
  body { 
    padding-bottom: 0; /* Elimina padding en escritorio */
  }
  .grid-container {
    grid-template-columns: 2fr 1fr; /* Dos columnas: principal más ancha */
    gap: 20px;
    padding: 20px;
    align-items: start;
  }
  .sidebar-column { 
    position: sticky; /* Barra lateral fija al hacer scroll */
    top: 20px; 
  }
}

/* Contenedores de columnas */
.main-column, .sidebar-column {
  display: flex;
  flex-direction: column;
  gap: 15px; /* Espaciado entre tarjetas */
}

/* Ajustes de espaciado para escritorio */
@media (min-width: 1024px) {
  .main-column, .sidebar-column { 
    gap: 20px; /* Más espacio entre tarjetas en escritorio */
  }
}

/* =================================================================== */
/* 3. ESTILO DE TARJETAS (CARDS) Y FORMULARIOS                       */
/* =================================================================== */
.card {
  background-color: var(--color-blanco);
  border-radius: var(--border-radius-suave);
  box-shadow: var(--sombra-suave);
  overflow: visible;
}

/* Encabezado de tarjetas */
.card-header {
  background-color: var(--color-principal);
  color: var(--color-oscuro);
  padding: 15px 20px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1); /* Línea sutil de separación */
}

.card-header h1, .card-header h2 {
  margin: 0;
  font-size: 1.2em;
  font-weight: 600;
}

/* Cuerpo de tarjetas */
.card-body { 
  padding: 20px; 
  position: relative; /* Contenedor de referencia para el tooltip dinámico */
}

/* Estilos de formularios */
.profile-form { 
  display: flex; 
  flex-direction: column; 
  gap: 20px; /* Espacio entre grupos de formulario */
}
.form-group { 
  display: flex; 
  flex-direction: column; 
  gap: 8px; /* Espacio entre label e input */
}
.form-group label { 
  font-weight: 600; 
  font-size: 0.9em; 
  color: var(--color-texto-secundario); 
}

/* Estilo mejorado para los inputs */
.form-group input { 
  padding: 12px 15px; 
  border-radius: 8px; 
  font-size: 1em; 
  transition: var(--transicion-suave); 
  background-color: var(--color-blanco);
  border: 1px solid #dcdcdc; /* Borde sutil por defecto */
}
/* Efectos de focus en inputs */
.form-group input:focus { 
  outline: none; 
  border-color: var(--color-principal); 
  box-shadow: 0 0 0 3px rgba(255, 200, 57, 0.5); /* Glow effect */
}

/* =================================================================== */
/* 4. BOTONES Y MENSAJES DE ALERTA                                   */
/* =================================================================== */
/* Estilos base para botones */
.btn { 
  padding: 12px 24px; 
  border: none; 
  border-radius: 50px; /* Bordes completamente redondeados */
  font-size: 1em; 
  font-weight: 600; 
  cursor: pointer; 
  transition: var(--transicion-suave); 
  text-align: center; 
  text-decoration: none; 
  display: block; 
  width: 100%; /* Botones de ancho completo */
}

/* Variantes de botones */
.btn-primary { 
  background-color: var(--color-oscuro); 
  color: var(--color-blanco); 
  align-self: flex-end; /* Alineación a la derecha en formularios */
}
.btn-primary:hover { 
  background-color: #000; /* Oscurece al hacer hover */
}

.btn-secondary { 
  background-color: var(--color-texto-secundario); 
  color: var(--color-blanco); 
}
.btn-secondary:hover { 
  background-color: #5a6268; 
}

.btn-danger-outline { 
  background-color: transparent; 
  color: var(--color-rojo-peligro); 
  border: 2px solid var(--color-rojo-peligro); 
}
.btn-danger-outline:hover { 
  background-color: var(--color-rojo-peligro); 
  color: var(--color-blanco); 
}

/* Mensajes de alerta */
.alert { 
  padding: 15px; 
  border-radius: 8px; 
  font-weight: 500; 
  margin-bottom: 20px; 
  white-space: pre-line; /* Mantiene saltos de línea */
}
.alert-success { 
  background-color: #d4edda; 
  color: #155724; 
}
.alert-error { 
  background-color: #f8d7da; 
  color: #721c24; 
}

/* =================================================================== */
/* 5. SECCIÓN DE LOGROS (CON TOOLTIP INTELIGENTE)                    */
/* =================================================================== */
/* Grid responsivo para logros */
.achievements-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); /* Grid adaptable */
  gap: 15px;
}

/* Elementos individuales de logros */
.achievement-item {
  position: relative;
  aspect-ratio: 1 / 1; /* Mantiene proporción cuadrada */
  background-color: var(--color-bordes-sutiles);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform 0.2s ease;
}

/* Efecto hover en logros */
.achievement-item:hover {
  transform: scale(1.1); /* Efecto de zoom */
  z-index: 10; /* Asegura que esté por encima de otros elementos */
}

/* Imágenes de logros */
.achievement-item img {
  width: 80%;
  height: 80%;
  object-fit: contain; /* Mantiene proporciones de la imagen */
}

/* Estilo para logros bloqueados */
.achievement-item.locked img {
  filter: grayscale(100%) opacity(0.6); /* Efecto gris y transparente */
}

/* Tooltip para información de logros */
#achievement-tooltip {
  position: absolute;
  background-color: var(--color-oscuro);
  color: var(--color-blanco);
  padding: 10px 15px;
  border-radius: 8px;
  z-index: 9999; /* Por encima de todo */
  width: 220px;
  text-align: center;
  font-size: 0.9em;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s ease, visibility 0.2s ease;
  pointer-events: none; /* No interfiere con otros elementos */
}

/* Flecha del tooltip */
#achievement-tooltip::after {
  content: '';
  position: absolute;
  left: var(--arrow-left, 50%); /* Controlado por JavaScript */
  transform: translateX(-50%);
  border-width: 6px;
  border-style: solid;
}

/* Flecha apuntando hacia abajo */
#achievement-tooltip.arrow-down::after {
    top: 100%;
    border-color: var(--color-oscuro) transparent transparent transparent;
}

/* Flecha apuntando hacia arriba */
#achievement-tooltip.arrow-up::after {
    bottom: 100%;
    border-color: transparent transparent var(--color-oscuro) transparent;
}

/* Estado visible del tooltip */
#achievement-tooltip.visible {
  opacity: 1;
  visibility: visible;
}

/* Elementos internos del tooltip */
.tooltip-title { 
  font-weight: 700; 
  margin-bottom: 5px; 
}
.tooltip-description { 
  font-size: 0.9em; 
  opacity: 0.8; /* Texto secundario más suave */
}
.tooltip-date { 
  font-size: 0.8em; 
  margin-top: 8px; 
  color: var(--color-principal); /* Color destacado */
}
.tooltip-exp { 
  font-weight: 700; 
  font-size: 0.95em; 
  color: var(--color-verde-exito); 
  margin-top: 8px; 
  padding-top: 8px; 
  border-top: 1px solid rgba(255, 255, 255, 0.2); /* Línea separadora */
}