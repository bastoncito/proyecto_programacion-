# ========================================
# CONFIGURACIÓN DE SQLITE
# ========================================
# URL de la base de datos SQLite (se crea automáticamente si no existe)
spring.datasource.url=jdbc:sqlite:michaelsoft_binbows.db
spring.datasource.driver-class-name=org.sqlite.JDBC
spring.datasource.username=
spring.datasource.password=

# ========================================
# CONFIGURACIÓN DE JPA/HIBERNATE
# ========================================
# Dialecto específico de SQLite
spring.jpa.database-platform=org.hibernate.community.dialect.SQLiteDialect

# Estrategia de generación de esquema:
# - update: actualiza el esquema sin perder datos (RECOMENDADO para desarrollo)
# - create: borra y recrea las tablas cada vez (PELIGROSO - pierdes datos)
# - create-drop: crea al iniciar, borra al cerrar
# - validate: solo valida que el esquema coincida
# - none: no hace nada automáticamente
spring.jpa.hibernate.ddl-auto=update

# Mostrar las consultas SQL en la consola (útil para debugging)
spring.jpa.show-sql=true

# Formatear las consultas SQL para que sean más legibles
spring.jpa.properties.hibernate.format_sql=true

# Mostrar los valores de los parámetros en las consultas
# logging.level.org.hibernate.orm.jdbc.bind=trace

# ========================================
# CONFIGURACIÓN DEL SERVIDOR
# ========================================
# Puerto en el que correrá la aplicación
server.port=8080

# Ruta base de la aplicación (opcional)
# server.servlet.context-path=/

# ========================================
# CONFIGURACIÓN DE THYMELEAF
# ========================================
# Deshabilitar caché de templates en desarrollo (para ver cambios inmediatamente)
spring.thymeleaf.cache=false

# Prefijo y sufijo de las plantillas
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html

# ========================================
# CONFIGURACIÓN DE SPRING SECURITY
# ========================================
# Deshabilitar el formulario de login por defecto de Spring Security
# (si quieres usar tu propio formulario personalizado)
# spring.security.user.name=admin
# spring.security.user.password=admin

# ========================================
# CONFIGURACIÓN DE JPA - OPTIMIZACIONES
# ========================================
# Desactivar open-in-view para evitar lazy loading fuera de transacciones
# (esto elimina la advertencia que viste en los logs)
spring.jpa.open-in-view=false

# Habilitar el batch processing para mejorar el rendimiento
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ========================================
# CONFIGURACIÓN DE LOGS
# ========================================
# Nivel de logs de Spring
logging.level.org.springframework=INFO

# Nivel de logs de Hibernate
logging.level.org.hibernate=INFO

# Nivel de logs de tu aplicación (ajusta el paquete)
logging.level.Michaelsoft_Binbows=DEBUG

# Logs específicos de SQL (descomenta para ver más detalles)
# logging.level.org.hibernate.SQL=DEBUG
# logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ========================================
# CONFIGURACIÓN DE ENCODING
# ========================================
# Asegura que los caracteres especiales (ñ, tildes, etc.) se manejen correctamente
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true
spring.http.encoding.force=true

# ========================================
# CONFIGURACIÓN DE JACKSON (JSON)
# ========================================
# Serialización de fechas en formato ISO-8601
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=America/Santiago

# ========================================
# CONFIGURACIÓN DE DESARROLLO
# ========================================
# Habilitar modo de desarrollo (reinicio automático con DevTools)
# spring.devtools.restart.enabled=true

# Habilitar live reload en el navegador
# spring.devtools.livereload.enabled=true

spring.jpa.hibernate.use-new-id-generator-mappings=true
spring.jpa.properties.hibernate.id.new_generator_mappings=true