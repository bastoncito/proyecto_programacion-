<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Lista de Usuarios</title>
    <!-- Añadimos Bootstrap para que se vea bonito y responsive -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1>Lista de Usuarios Registrados</h1>
        <p>Datos cargados desde <code>base_datos.json</code></p>
        
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>Nombre de Usuario</th>
                    <th>Correo Electrónico</th>
                    <th>Nº Tareas</th>
                </tr>
            </thead>
            <tbody>
                <!-- 
                    AQUÍ OCURRE LA MAGIA DE THYMELEAF:
                    th:each="usuario : ${usuariosParaLaVista}"
                    Esto repetirá esta fila <tr> por cada objeto 'usuario' que haya
                    en la lista que le pasamos desde el Controller.
                -->
                <tr th:each="usuario : ${usuariosParaLaVista}">
                    <td th:text="${usuario.nombre_usuario}">Nombre de ejemplo</td>
                    <td th:text="${usuario.correo_electronico}">correo@ejemplo.com</td>
                    <td th:text="${usuario.getTareas().size()}">0</td>
                </tr>
                <p th:if="${#lists.isEmpty(usuariosParaLaVista)}">No hay usuarios registrados.</p>
            </tbody>
        </table>
    </div>
</body>
</html>